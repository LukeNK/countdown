<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');

        html {
            --color-fg: #030301ff;
            --color-bg: #fffff3ff;
            --color-green: #00d9c0ff;
            --color-grey: #b7ad99ff;
            --color-red: #ff4365ff;
        }

        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--color-bg);
            max-width: 600px;
            margin: auto;
            font-family: 'Inter', sans-serif;
        }

        h1, h2, h3 {
            font-family: 'Comfortaa', sans-serif;
        }

        details {
            border-radius: 0.5rem;
        }

        summary {
            padding: 1rem;
            width: 100%;
            background-color: var(--color-grey);
        }
        summary::marker { content: none; }
        summary h2 {
            margin: 0;
        }

        details > div {
            display: flex;
            align-items: stretch;
        }

        .time, .work {
            display: block;
            width: 4rem;
            background-color: var(--color-green);
            transition: width 0.5s ease-in-out;
            text-align: center;
        }

        li[done] {
            text-decoration: line-through;
        }
    </style>
</head>
<body>
    <details start="2025-03-20T00:00:00Z" finish="2025-05-10T06:55:00Z">
        <summary>
            <h2>Primary</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum consequatur molestiae impedit, iste accusantium dolorem libero commodi autem culpa soluta mollitia nulla iusto quidem eaque iure vitae suscipit natus delectus.</p>
        </summary>
        <ul>
            <li>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
        </ul>
    </details>
    <details start="2025-03-20T00:00:00Z" finish="2025-04-10T06:55:00Z">
        <summary>
            <h2>Primary</h2>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nostrum consequatur molestiae impedit, iste accusantium dolorem libero commodi autem culpa soluta mollitia nulla iusto quidem eaque iure vitae suscipit natus delectus.</p>
        </summary>
        <ul>
            <li done>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
            <li>a</li>
        </ul>
    </details>
</body>
<script>
    document.querySelectorAll('details').forEach((details) => {
        details.innerHTML += `<div>

        </div>`;

        details.querySelector('ul').outerHTML = '<div>'
            + '<div><span class="time"></span></div> <div><span class="work"></span></div>'
            + details.querySelector('ul').outerHTML
        + '</div>';

        const workAll = details.querySelectorAll('li').length,
            workDo = details.querySelectorAll('li[done]').length;
        details.querySelector('.work').style.height = `${(workDo / workAll * 100).toFixed(1)}%`;
        details.querySelector('.work').innerHTML = `${workDo} / ${workAll}`;

        if (workDo < workAll)
            details.setAttribute('open', '');
    });

    setInterval(() => {
        document.querySelectorAll('details').forEach((details) => {
            const start = new Date(details.getAttribute('start')),
                finish = new Date(details.getAttribute('finish')),
                now = new Date();
            const timeDo = Math.max(now - start, 0),
                timeAll = finish - start;
            const timePercent = Math.min((timeDo / timeAll) * 100, 100);

            details.querySelector('.time').style.height = `${timePercent}%`;
            details.querySelector('.time').innerHTML = `${timePercent.toFixed(1)}%`;
        });
    }, 500);
</script>
</html>